(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{190:function(e,t,n){"use strict";(function(t){const i=n(6),o=n(3),r=n(207),a=n(258),s=n(195),c=n(198),_=n(262);e.exports=i.View.extend({id:"nginx-certificates",template:_,ui:{list_region:".list-region",add:".add-item",help:".help",dimmer:".dimmer"},regions:{list_region:"@ui.list_region"},events:{"click @ui.add":function(e){e.preventDefault();let n=new r.Model({provider:t(e.currentTarget).data("cert")});o.Controller.showNginxCertificateForm(n)},"click @ui.help":function(e){e.preventDefault(),o.Controller.showHelp(o.i18n("certificates","help-title"),o.i18n("certificates","help-content"))}},templateContext:{showAddButton:o.Cache.User.canManage("certificates")},onRender:function(){let e=this;o.Api.Nginx.Certificates.getAll(["owner"]).then(t=>{if(!e.isDestroyed())if(t&&t.length)e.showChildView("list_region",new a({collection:new r.Collection(t)}));else{let t=o.Cache.User.canManage("certificates");e.showChildView("list_region",new c({title:o.i18n("certificates","empty"),subtitle:o.i18n("all-hosts","empty-subtitle",{manage:t}),link:t?o.i18n("certificates","add"):null,btn_color:"pink",permission:"certificates",action:function(){o.Controller.showNginxCertificateForm()}}))}}).catch(t=>{e.showChildView("list_region",new s({code:t.code,message:t.message,retry:function(){o.Controller.showNginxCertificates()}})),console.error(t)}).then(()=>{e.ui.dimmer.removeClass("active")})}})}).call(this,n(4))},195:function(e,t,n){"use strict";const i=n(6),o=n(196);e.exports=i.View.extend({template:o,className:"alert alert-icon alert-warning m-5",ui:{retry:"a.retry"},events:{"click @ui.retry":function(e){e.preventDefault(),this.getOption("retry")()}},templateContext:function(){return{message:this.getOption("message"),code:this.getOption("code"),retry:"function"==typeof this.getOption("retry")}}})},196:function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='<i class="fe fe-alert-triangle mr-2" aria-hidden="true"></i>\n'+(null==(__t=code?"<strong>"+code+"</strong> &mdash; ":"")?"":__t)+"\n"+__e(message)+"\n\n",retry&&(__p+='\n    <br><br><a href="#" class="btn btn-sm btn-warning retry">'+__e(i18n("str","try-again"))+"</a>\n"),__p+="\n";return __p}}).call(this,__webpack_require__(0))},198:function(e,t,n){"use strict";const i=n(6),o=n(199);e.exports=i.View.extend({className:"text-center m-7",template:o,options:{btn_color:"teal"},ui:{action:"a"},events:{"click @ui.action":function(e){e.preventDefault(),this.getOption("action")()}},templateContext:function(){return{title:this.getOption("title"),subtitle:this.getOption("subtitle"),link:this.getOption("link"),action:"function"==typeof this.getOption("action"),btn_color:this.getOption("btn_color")}}})},199:function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)title&&(__p+='\n    <h1 class="h2 mb-3">'+__e(title)+"</h1>\n"),subtitle&&(__p+='\n    <p class="h4 text-muted font-weight-normal mb-7">'+__e(subtitle)+"</p>\n"),link&&(__p+='\n    <a class="btn btn-'+__e(btn_color)+'" href="#">'+__e(link)+"</a>\n"),__p+="\n";return __p}}).call(this,__webpack_require__(0))},207:function(e,t,n){"use strict";const i=n(2),o=i.Model.extend({idAttribute:"id",defaults:function(){return{id:void 0,created_on:null,modified_on:null,provider:"",nice_name:"",domain_names:[],expires_on:null,meta:{},owner:null,proxy_hosts:[],redirection_hosts:[],dead_hosts:[]}},hasSslFiles:function(){let e=this.get("meta");return void 0!==e.certificate&&e.certificate&&void 0!==e.certificate_key&&e.certificate_key}});e.exports={Model:o,Collection:i.Collection.extend({model:o})}},258:function(e,t,n){"use strict";const i=n(6),o=n(3),r=n(259),a=n(261),s=i.CollectionView.extend({tagName:"tbody",childView:r});e.exports=i.View.extend({tagName:"table",className:"table table-hover table-outline table-vcenter text-nowrap card-table",template:a,regions:{body:{el:"tbody",replaceElement:!0}},templateContext:{canManage:o.Cache.User.canManage("certificates")},onRender:function(){this.showChildView("body",new s({collection:this.collection}))}})},259:function(e,t,n){"use strict";const i=n(6),o=n(1),r=n(3),a=n(260);e.exports=i.View.extend({template:a,tagName:"tr",ui:{delete:"a.delete"},events:{"click @ui.delete":function(e){e.preventDefault(),r.Controller.showNginxCertificateDeleteConfirm(this.model)}},templateContext:{canManage:r.Cache.User.canManage("certificates"),isExpired:function(){return o(this.expires_on).isBefore(o())}},initialize:function(){this.listenTo(this.model,"change",this.render)}})},260:function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='<td class="text-center">\n    <div class="avatar d-block" style="background-image: url('+__e(owner.avatar||"/images/default-avatar.jpg")+')" title="Owned by '+__e(owner.name)+'">\n        <span class="avatar-status '+__e(owner.is_disabled?"bg-red":"bg-green")+'"></span>\n    </div>\n</td>\n<td>\n    <div>\n        ',"letsencrypt"===provider?(__p+="\n            ",domain_names.map(function(e){__p+='\n                <span class="tag">'+__e(e)+"</span>\n                "}),__p+="\n        "):__p+="\n            "+__e(nice_name)+"\n        ",__p+='\n    </div>\n    <div class="small text-muted">\n        '+__e(i18n("str","created-on",{date:formatDbDate(created_on,"Do MMMM YYYY")}))+"\n    </div>\n</td>\n<td>\n    "+__e(i18n("ssl",provider))+'\n</td>\n<td class="'+__e(isExpired()?"text-danger":"")+'">\n    '+__e(formatDbDate(expires_on,"Do MMMM YYYY, h:mm a"))+"\n</td>\n",canManage&&(__p+='\n<td class="text-right">\n    <div class="item-action dropdown">\n        <a href="#" data-toggle="dropdown" class="icon"><i class="fe fe-more-vertical"></i></a>\n        <div class="dropdown-menu dropdown-menu-right">\n            <a href="#" class="delete dropdown-item"><i class="dropdown-icon fe fe-trash-2"></i> '+__e(i18n("str","delete"))+"</a>\n        </div>\n    </div>\n</td>\n");return __p}}).call(this,__webpack_require__(0))},261:function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='<thead>\n    <th width="30">&nbsp;</th>\n    <th>'+__e(i18n("str","name"))+"</th>\n    <th>"+__e(i18n("all-hosts","cert-provider"))+"</th>\n    <th>"+__e(i18n("str","expires"))+"</th>\n    ",canManage&&(__p+="\n    <th>&nbsp;</th>\n    "),__p+="\n</thead>\n<tbody>\n    \x3c!-- items --\x3e\n</tbody>\n";return __p}}).call(this,__webpack_require__(0))},262:function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='<div class="card">\n    <div class="card-status bg-pink"></div>\n    <div class="card-header">\n        <h3 class="card-title">'+__e(i18n("certificates","title"))+'</h3>\n        <div class="card-options">\n            <a href="#" class="btn btn-outline-secondary btn-sm ml-2 help"><i class="fe fe-help-circle"></i></a>\n            ',showAddButton&&(__p+='\n            <div class="dropdown">\n                <button type="button" class="btn btn-outline-pink btn-sm ml-2 dropdown-toggle" data-toggle="dropdown">\n                    '+__e(i18n("certificates","add"))+'\n                </button>\n                <div class="dropdown-menu">\n                    <a class="dropdown-item add-item" data-cert="letsencrypt" href="#">'+__e(i18n("ssl","letsencrypt"))+'</a>\n                    <a class="dropdown-item add-item" data-cert="other" href="#">'+__e(i18n("ssl","other"))+"</a>\n                </div>\n            </div>\n            "),__p+='\n        </div>\n    </div>\n    <div class="card-body no-padding min-100">\n        <div class="dimmer active">\n            <div class="loader"></div>\n            <div class="dimmer-content list-region">\n                \x3c!-- List Region --\x3e\n            </div>\n        </div>\n    </div>\n</div>\n';return __p}}).call(this,__webpack_require__(0))}}]);